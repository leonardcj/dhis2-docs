<?xml version='1.0' encoding='UTF-8'?>
<section version="5.0"
    xsi:schemaLocation="http://docbook.org/ns/docbook http://www.docbook.org/xml/5.0/xsd/docbook.xsd"
    xmlns="http://docbook.org/ns/docbook" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xl="http://www.w3.org/1999/xlink"
    xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xhtml="http://www.w3.org/1999/xhtml"
    xmlns:svg="http://www.w3.org/2000/svg" xmlns:mth="http://www.w3.org/1998/Math/MathML"
    xmlns:db="http://docbook.org/ns/docbook" xml:id="program_notifications">
    <title>Manage <?oxy_comment_start author="cecilia" timestamp="20161005T123636+0200" comment="At next revision, add doc about how you delete and edit "?>program<?oxy_comment_end?>
        <?oxy_comment_start author="cecilia" timestamp="20161004T161503+0200" comment="New feature, see notes and refer to talk with SME."?>notifications<?oxy_comment_end?></title>
    <section>
        <title>About program notifications</title>
        <para>You can create program notifications for programs and program stages. The
            notifications are send either via the internal DHIS2 messaging system, via e-mail or via
            text messages (SMS). You can use program notifications to, for example, send an
            automatic reminder to a tracked entity 10 days before a scheduled appointment.</para>
        <note>
            <para>To receive a program notification, the recipient must have an e-mail address or a
                phone number in his/her user profile.</para>
        </note>
    </section>
    <section>
        <title>Create a program notification</title>
        <orderedlist>
            <listitem>
                <para>Open the <emphasis role="bold">Program / Attributes</emphasis> app and click
                        <emphasis role="bold">Program</emphasis>.</para>
            </listitem>
            <listitem>
                <para>Click the relevant program and select <emphasis role="bold">View program
                        notifications</emphasis>.</para>
                <para>A list of existing program notifications for the selected program opens. If
                    the program doesn't have any program notifications, the list is empty.</para>
            </listitem>
            <listitem>
                <para>Click <emphasis role="bold">Add new</emphasis>.</para>
            </listitem>
            <listitem>
                <para>Enter a <emphasis role="bold"
                        ><?oxy_comment_start author="cecilia" timestamp="20161003T212441+0200" comment="Verify with SME: No code or short name fields in UI, correct?"?>Name<?oxy_comment_end?></emphasis>.</para>
            </listitem>
            <listitem>
                <para>In the <emphasis role="bold">Trigger by</emphasis> field, select what should
                    trigger the notification. You can select</para>
                <itemizedlist>
                    <listitem>
                        <para>Program enrollment: the notification is sent when the TEI enrols in
                            the program</para>
                    </listitem>
                    <listitem>
                        <para>Program completion: the notification is sent when the program of TEI
                            is completed</para>
                    </listitem>
                    <listitem>
                        <para>Days scheduled (incident date): the notification is sent XX number of
                            days before or after the incident date</para>
                    </listitem>
                    <listitem>
                        <para>Days scheduled (enrollment date): the notification is sent XX number
                            of days before or after the enrollment date</para>
                    </listitem>
                </itemizedlist>
                <note>
                    <para>If you select "Days scheduled" you also need to enter the number of days
                        before or after the scheduled date that the notification will be
                        send.</para>
                </note>
            </listitem>
            <listitem>
                <para>In the <emphasis role="bold">Recipients</emphasis> field, select who should
                    receive the notification. You can select:</para>
                <itemizedlist>
                    <listitem>
                        <para>Tracked entity instance: receives program notification via e-mail or
                            text message</para>
                    </listitem>
                    <listitem>
                        <para>Organisation unit contact: receives program notification via e-mail or
                            text message</para>
                    </listitem>
                    <listitem>
                        <para>Users at organisation unit: receives program notification via the
                            internal DHIS2 messaging system</para>
                    </listitem>
                    <listitem>
                        <para>User group: receives program notification via the internal DHIS2
                            messaging system</para>
                    </listitem>
                </itemizedlist>
            </listitem>
            <listitem>
                <para>Create the <emphasis role="bold">Subject template</emphasis>.</para>
                <para>Double-click the
                    <?oxy_comment_start author="cecilia" timestamp="20161005T120230+0200" comment="consist of TEI attributes and??"?>parameter<?oxy_comment_end?>
                    names in the <emphasis role="bold">Parameters</emphasis> field to add them to
                    your subject.</para>
                <note>
                    <para>The subject is not included in text messages.</para>
                </note>
            </listitem>
            <listitem>
                <para>Create the <emphasis role="bold">Message template</emphasis>.</para>
                <para>Double-click the parameter names in the <emphasis role="bold"
                        >Parameters</emphasis> field to add them to your message.</para>
                <example>
                    <para>Dear {patient-name}, please come to your appointment at {due-date}.</para>
                </example>
            </listitem>
            <listitem>
                <para>Click <emphasis role="bold">Save</emphasis>.</para>
            </listitem>
        </orderedlist>
        <note>
            <para>You configure when the program notification will run in the <emphasis role="bold"
                    >Data Administration</emphasis> app > <emphasis role="bold"
                    >Scheduling</emphasis> > <emphasis role="bold">Program notifications
                    scheduler</emphasis>. </para>
            <itemizedlist>
                <listitem>
                    <para>Click <emphasis role="bold">Run now</emphasis> to run the program
                        notifications immediately.</para>
                </listitem>
                <listitem>
                    <para>Select a time and click <emphasis role="bold">Start</emphasis> to schedule
                        the program notifications to run at a specific time.</para>
                </listitem>
            </itemizedlist>
        </note>
    </section>
    <section>
        <title>Create a program stage notification</title>
        <orderedlist>
            <listitem>
                <para>Open the <emphasis role="bold">Program / Attributes</emphasis> app and click
                        <emphasis role="bold">Program</emphasis>.</para>
            </listitem>
            <listitem>
                <para>Click the relevant program and select <emphasis role="bold">View program
                        stages</emphasis>.</para>
            </listitem>
            <listitem>
                <para>Click the relevant stage and select <emphasis role="bold">View program stage
                        notifications</emphasis>.</para>
                <para>A list of existing program stage notifications for the selected program stage
                    opens. If the program stage doesn't have any program notifications, the list is
                    empty.</para>
            </listitem>
            <listitem>
                <para>Click <emphasis role="bold">Add new</emphasis>.</para>
            </listitem>
            <listitem>
                <para>Enter a <emphasis role="bold"
                        ><?oxy_comment_start author="cecilia" timestamp="20161003T212441+0200" comment="Verify with SME: No code or short name fields in UI, correct?"?>Name<?oxy_comment_end?></emphasis>.</para>
            </listitem>
            <listitem>
                <para>In the <emphasis role="bold">Trigger by</emphasis> field, select what should
                    trigger the notification. You can select</para>
                <itemizedlist>
                    <listitem>
                        <para>Program stage completion: the notification is sent when the program
                            stage is completed</para>
                    </listitem>
                    <listitem>
                        <para>Days scheduled (due date): the notification is sent XX number of days
                            before or after the due date</para>
                    </listitem>
                </itemizedlist>
                <note>
                    <para>If you select "Days scheduled" you also need to enter the number of days
                        before or after the scheduled date that the notification will be
                        send.</para>
                </note>
            </listitem>
            <listitem>
                <para>In the <emphasis role="bold">Recipients</emphasis> field, select who should
                    receive the notification. You can select:</para>
                <itemizedlist>
                    <listitem>
                        <para>Tracked entity instance: receives program notification via e-mail or
                            text message</para>
                    </listitem>
                    <listitem>
                        <para>Organisation unit contact: receives program notification via e-mail or
                            text message</para>
                    </listitem>
                    <listitem>
                        <para>Users at organisation unit: receives program notification via the
                            internal DHIS2 messaging system</para>
                    </listitem>
                    <listitem>
                        <para>User group: receives program notification via the internal DHIS2
                            messaging system</para>
                    </listitem>
                </itemizedlist>
            </listitem>
            <listitem>
                <para>Create the <emphasis role="bold">Subject template</emphasis>.</para>
                <para>Double-click the
                    <?oxy_comment_start author="cecilia" timestamp="20161005T120230+0200" comment="consist of TEI attributes and??"?>parameter<?oxy_comment_end?>
                    names in the <emphasis role="bold">Parameters</emphasis> field to add them to
                    your subject.</para>
                <note>
                    <para>The subject is not included in text messages.</para>
                </note>
            </listitem>
            <listitem>
                <para>Create the <emphasis role="bold">Message template</emphasis>.</para>
                <para>Double-click the parameter names in the <emphasis role="bold"
                        >Parameters</emphasis> field to add them to your message.</para>
            </listitem>
            <listitem>
                <para>Click <emphasis role="bold">Save</emphasis>.</para>
            </listitem>
        </orderedlist>
    </section>
</section>
